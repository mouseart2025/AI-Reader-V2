# AI Reader V2 产品功能对齐分析报告

> 分析日期：2026-02-17  
> 分析依据：目标用户研究报告 + 现有PRD功能规划

---

## 一、现有产品功能架构概览

### 1.1 核心功能模块

```
AI Reader V2
├── 📚 书架管理 (Bookshelf)
│   ├── 上传小说 (.txt/.md)
│   ├── 章节自动切分
│   ├── 书架列表/搜索/排序
│   └── 分析数据导入/导出 (JSON)
│
├── 📖 阅读模块 (Reading)
│   ├── 章节文本渲染
│   ├── 章节目录导航 (树形折叠)
│   ├── 实体高亮 (人物/地点/物品/组织/概念)
│   ├── 实体卡片抽屉 (人物/地点/物品/组织)
│   ├── 阅读进度记忆
│   └── 全文搜索
│
├── 🕸️ 可视化分析 (Visualization)
│   ├── 人物关系图 (力导向图)
│   ├── 世界地图 (空间视图+层级视图)
│   ├── 时间线 (事件轴+多泳道)
│   └── 势力图 (组织关系网络)
│
├── 💬 智能问答 (Chat)
│   ├── 自然语言问答
│   ├── 浮动面板/全屏对话模式
│   ├── 对话历史管理
│   └── 对话导出 (Markdown)
│
├── 📊 分析管理 (Analysis)
│   ├── 全书/范围分析
│   ├── 分析进度展示
│   ├── 暂停/恢复/取消
│   └── 重新分析
│
└── 📚 百科 (Encyclopedia)
    ├── 实体索引
    ├── 概念词条
    └── 概念自动分类
```

### 1.2 数据模型核心

- **ChapterFact**: 每章提取的结构化数据（实体、关系、事件、概念）
- **Entity Profiles**: 聚合的人物/地点/物品/组织卡片数据
- **World Structure**: 地点层级、空间关系、地理坐标

---

## 二、目标用户需求 vs 现有功能对齐矩阵

### 2.1 网文作者需求对齐

| 需求 | 现有功能 | 缺口 | 优先级 |
|------|---------|------|--------|
| 长文设定一致性检查 | 实体卡片展示全本信息 | ⚠️ 缺少自动化冲突检测 | P1 |
| 人物设定快速查阅 | 人物卡片完整 | ✅ 已满足 | - |
| 多开作品管理 | 书架支持多本小说 | ⚠️ 缺少跨书设定对比 | P2 |
| **导出为Markdown/Excel** | 仅支持JSON导出 | ❌ **格式不支持** | **P0** |
| 枪手协作（设定文档分享） | 无分享功能 | ❌ **功能缺失** | **P1** |
| 本地隐私（防AI投喂） | 本地部署 | ✅ 已满足 | 核心优势 |

### 2.2 传统出版作者需求对齐

| 需求 | 现有功能 | 缺口 | 优先级 |
|------|---------|------|--------|
| 跨书设定管理 | 单书数据隔离 | ❌ **不支持跨书** | **P1** |
| **编辑协作（Word/PDF导出）** | 仅JSON导出 | ❌ **格式不支持** | **P0** |
| 设定文档提交 | 无 | ❌ **功能缺失** | **P1** |
| 角色一致性追踪 | 人物关系演变链 | ✅ 已满足 | - |

### 2.3 编剧/脚本作者需求对齐

| 需求 | 现有功能 | 缺口 | 优先级 |
|------|---------|------|--------|
| **小说→剧本结构转换** | 无 | ❌ **功能缺失** | **P0** |
| 场景提取与展示 | 地点卡片+事件 | ⚠️ 缺少场景化重组 | P1 |
| 角色小传生成 | 人物卡片基础信息 | ⚠️ 缺少剧本格式 | P1 |
| 一句话梗概 | 无 | ❌ **功能缺失** | **P2** |
| 分场大纲 | 无 | ❌ **功能缺失** | **P1** |
| **剧本格式导出** | 无 | ❌ **功能缺失** | **P0** |

### 2.4 IP改编编辑需求对齐

| 需求 | 现有功能 | 缺口 | 优先级 |
|------|---------|------|--------|
| **世界观文档导出（Excel/Word）** | 仅JSON导出 | ❌ **格式不支持** | **P0** |
| 角色数据表 | 人物卡片 | ⚠️ 缺少表格视图 | P1 |
| 势力关系矩阵 | 势力图可视化 | ⚠️ 缺少矩阵导出 | P1 |
| 快速原作理解 | 智能问答+百科 | ✅ 基本满足 | - |
| 跨团队协作分享 | 无分享功能 | ❌ **功能缺失** | **P1** |
| 设定变更追踪 | 无版本管理 | ❌ **功能缺失** | **P2** |

---

## 三、核心功能缺口识别

### 3.1 高优先级缺口（阻碍用户采用）

```
🔴 P0 - 必须解决
├── 1. Series Bible 多格式导出引擎
│   ├── Markdown导出（网文作者）
│   ├── Word导出（传统出版/编辑协作）
│   ├── Excel导出（IP改编/游戏策划）
│   └── PDF导出（正式提交/分享）
│
├── 2. 剧本模式（Script Mode）
│   ├── 场景识别与提取
│   ├── 剧本格式展示（场景标题+动作+对话）
│   ├── 原文/剧本并排对比
│   └── 角色小传自动生成
│
└── 3. 数据表视图（Table View）
    ├── 角色属性表（类Excel）
    ├── 势力关系矩阵
    └── 物品/技能清单
```

### 3.2 中优先级缺口（提升用户价值）

```
🟡 P1 - 重要增值
├── 1. 设定冲突检测
│   ├── 角色属性矛盾检测（如第10章说18岁，第50章说20岁但只过1年）
│   ├── 地点层级矛盾检测
│   └── 关系演变逻辑检查
│
├── 2. 协作与分享
│   ├── 设定文档链接分享
│   ├── 团队协作空间
│   └── 评论与批注
│
├── 3. 跨书设定管理
│   ├── 系列作品设定关联
│   └── 跨书角色/地点一致性检查
│
└── 4. 导出模板定制
    ├── 按用户类型优化模板
    ├── 自定义字段选择
    └── 自定义排版样式
```

### 3.3 低优先级缺口（未来探索）

```
🟢 P2 - 增值优化
├── 1. AI辅助创作建议
│   ├── 基于设定的剧情建议
│   └── 角色发展建议
│
├── 2. 版本管理
│   ├── 设定变更历史
│   └── 版本对比
│
└── 3. 更多格式支持
    ├── Final Draft导入/导出
    ├── XMind导出
    └── Notion集成
```

---

## 四、建议的功能架构调整

### 4.1 新增核心模块：Series Bible 导出中心

```
📤 Series Bible 导出中心 (Export Hub)
├── 快速导出
│   ├── Markdown（完整/轻量模板）
│   ├── Word文档（正式排版）
│   ├── Excel工作簿（多表数据）
│   └── PDF（只读分享）
│
├── 场景化导出
│   ├── 📖 网文作者套件
│   │   ├── 人物设定卡
│   │   ├── 势力分布图
│   │   └── 时间线大纲
│   │
│   ├── 🎬 编剧套件
│   │   ├── 场景列表
│   │   ├── 角色小传（剧本格式）
│   │   ├── 分场大纲
│   │   └── 一句话梗概
│   │
│   └── 🎮 游戏策划套件
│       ├── NPC数据表
│       ├── 势力关系矩阵
│       ├── 物品/技能表
│       └── 世界观设定文档
│
└── 自定义导出
    ├── 字段选择
    ├── 模板编辑
    └── 预览与调整
```

### 4.2 阅读模块增强：剧本模式

```
📖 阅读模块增强
├── 现有：普通阅读模式
├── 新增：剧本模式 (Script Mode)
│   ├── 场景分割展示
│   │   ├── 场景标题（地点+时间）
│   │   ├── 场景描述（环境/动作）
│   │   ├── 角色对话（说话人+内容）
│   │   └── 场景转换标记
│   │
│   ├── 并排对比视图
│   │   ├── 左侧：原文
│   │   ├── 右侧：剧本格式
│   │   └── 同步滚动/点击同步
│   │
│   ├── 场景导航
│   │   ├── 场景列表侧边栏
│   │   ├── 按地点筛选场景
│   │   └── 按角色筛选场景
│   │
│   └── 剧本编辑（P2）
│       ├── 手动调整场景边界
│       ├── 编辑场景描述
│       └── 标记场景类型
│
└── 角色追踪模式
    ├── 选择关注角色
    ├── 高亮该角色所有出场
    └── 生成角色专属阅读视图
```

### 4.3 可视化增强：数据表视图

```
📊 新增：数据表视图 (Table View)
├── 角色表
│   ├── 列：姓名、性别、身份、境界、所属势力、出场次数...
│   ├── 筛选：按势力/按境界/按出场次数
│   ├── 排序：多列排序
│   └── 导出：Excel/CSV
│
├── 势力矩阵
│   ├── 行：势力A
│   ├── 列：势力B
│   ├── 值：关系类型+章节
│   └── 导出：Excel/图片
│
└── 地点层级表
    ├── 树形表格展示
    ├── 到访人物统计
    └── 事件数量统计
```

---

## 五、详细功能建议与优先级

### 5.1 P0 功能（Phase 1 必须）

| 编号 | 功能 | 用户价值 | 技术复杂度 | 建议迭代 |
|------|------|---------|-----------|---------|
| F-100 | Markdown导出 | 网文作者基础需求 | 低 | Sprint 1 |
| F-101 | Word导出 | 传统出版/编辑协作 | 中 | Sprint 1-2 |
| F-102 | Excel导出 | IP改编/游戏策划刚需 | 中 | Sprint 2 |
| F-103 | PDF导出 | 通用分享需求 | 低 | Sprint 1 |
| F-104 | **剧本模式-场景展示** | 编剧核心需求 | 高 | Sprint 3-4 |
| F-105 | **并排对比视图** | 编剧/改编者刚需 | 中 | Sprint 3 |

### 5.2 P1 功能（Phase 2 重要）

| 编号 | 功能 | 用户价值 | 技术复杂度 | 建议迭代 |
|------|------|---------|-----------|---------|
| F-110 | 角色数据表视图 | IP改编者效率工具 | 中 | Phase 2 |
| F-111 | 势力关系矩阵 | 游戏策划刚需 | 中 | Phase 2 |
| F-112 | 设定冲突检测 | 网文作者增值功能 | 高 | Phase 2 |
| F-113 | 场景化导出模板 | 提升导出价值 | 中 | Phase 2 |
| F-114 | 文档链接分享 | 团队协作基础 | 中 | Phase 2 |

### 5.3 P2 功能（Phase 3 优化）

| 编号 | 功能 | 用户价值 | 技术复杂度 | 建议迭代 |
|------|------|---------|-----------|---------|
| F-120 | 一句话梗概生成 | 编剧增值 | 高 | Phase 3 |
| F-121 | 分场大纲生成 | 编剧增值 | 高 | Phase 3 |
| F-122 | 版本管理 | 专业用户增值 | 中 | Phase 3 |
| F-123 | Final Draft导出 | 编剧生态集成 | 中 | Phase 3 |

---

## 六、用户体验流程建议

### 6.1 网文作者典型流程

```
上传小说 → 自动分析 → 阅读+查设定 → 发现不一致 → 导出Markdown设定卡
                    ↓
              多开管理 → 跨书角色对比 → 导出Excel人物表给枪手
```

### 6.2 编剧典型流程

```
上传小说 → 自动分析 → 切换到剧本模式 → 并排查看原文/场景
                    ↓
              调整场景边界 → 导出分场大纲 → 导出角色小传 → Final Draft
```

### 6.3 IP改编编辑典型流程

```
上传小说 → 自动分析 → 数据表视图快速理解 → 导出Excel数据表
                    ↓
              团队分享链接 → 协作批注 → 导出Word设定文档
```

---

## 七、技术实现建议

### 7.1 导出引擎架构

```python
# 建议架构
ExportEngine/
├── formats/
│   ├── markdown_exporter.py   # 轻量，纯文本
│   ├── word_exporter.py       # python-docx
│   ├── excel_exporter.py      # openpyxl
│   └── pdf_exporter.py        # reportlab / weasyprint
├── templates/
│   ├── web_author_template.py
│   ├── screenwriter_template.py
│   └── game_designer_template.py
├── transformers/
│   └── data_transformer.py    # 聚合数据→导出格式
└── api.py                     # REST端点
```

### 7.2 剧本模式数据流

```
ChapterFact (原文)
    ↓
SceneExtractor (LLM/规则提取场景)
    ↓
SceneModel {
    location: str,
    time: str,
    characters: List[str],
    description: str,
    dialogue: List[DialogueLine],
    action: List[str]
}
    ↓
ScriptView (并排展示组件)
```

---

## 八、关键成功指标（KSI）

| 指标 | 目标值 | 测量方式 |
|------|--------|---------|
| 导出功能周活跃率 | >40% | 日志统计 |
| Word/Excel导出占比 | >50% | 导出格式统计 |
| 剧本模式使用留存 | >30%（次日） | 用户行为追踪 |
| IP改编用户NPS | >50 | 用户调研 |
| 付费转化率（导出→付费） | >15% | 漏斗分析 |

---

## 九、总结与建议

### 9.1 核心结论

1. **现有功能与目标用户存在明显缺口**：导出格式单一（仅JSON），缺乏编剧和IP改编者必需的Word/Excel/剧本格式

2. **剧本模式是高价值差异化功能**：市场上尚无"小说→剧本"的智能转换工具，这是独特卖点

3. **数据表视图是IP改编者的刚需**：游戏策划需要Excel格式的角色/NPC数据表，当前可视化无法满足

4. **本地隐私是核心竞争力**：在平台AI限制趋严的背景下，应持续强化这一优势

### 9.2 产品调整建议

```
Phase 1（立即启动）：
├── 建设 Series Bible 导出中心
│   └── Markdown/Word/Excel/PDF 四种格式
├── 阅读模块新增剧本模式入口
└── 优化人物卡片，增强"角色小传"信息

Phase 2（2-3个月后）：
├── 数据表视图（角色表、势力矩阵）
├── 设定冲突检测
└── 基础分享功能

Phase 3（长期）：
├── AI辅助剧本转换优化
├── 一句话梗概/分场大纲生成
└── 专业工具集成（Final Draft/XMind）
```

### 9.3 用户提到的剧本模式详细建议

**具体交互设计**：
- 在阅读页面顶部添加视图切换：`原文` | `剧本模式`
- 剧本模式下：
  - 左侧：保持原文展示
  - 右侧：场景化剧本视图
  - 中间：可拖动的分隔线
- 场景卡片包含：
  - 场景标题（地点 + 时间标记）
  - 角色列表（头像+名称）
  - 场景概要（AI生成）
  - "在原文中高亮此场景"按钮

**技术路径**：
1. 先基于ChapterFact的地点+事件数据自动划分场景边界
2. 使用LLM提取场景描述和对话
3. 缓存SceneModel避免重复计算
4. 逐步优化提取准确度

---

*报告完成于 2026-02-17*  
*建议下一步：与核心用户进行剧本模式原型验证*
